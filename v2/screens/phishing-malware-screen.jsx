import { h } from 'preact';
import html from 'nanohtml';
import raw from 'nanohtml/raw';
import { Stack } from '../../shared/js/ui/components/stack';
import { useData } from '../data-provider';
import { i18n } from '../../shared/js/ui/base/localize';
import { DomNode } from '../dom-node';
import { Button } from '../../shared/js/ui/components/button';
// import { platform } from '../../shared/js/browser/communication';

function Translate({ id, options = {}, rawHTML = false }) {
    const translatedString = i18n.t(id, options);
    const htmlNode = html`<span>${rawHTML ? raw(translatedString) : translatedString}</span>`;

    return (
        /* @ts-ignore */
        <DomNode key={id}>{htmlNode}</DomNode>
    );
}

export function PhishingMalwareScreen() {
    const { tab } = useData();

    return (
        <div className="padding-x phishing-malware">
            <Stack gap="24px">
                <div class="phishing-malware-icon phishing-malware-icon--phishing"></div>
                <h1 class="token-title-3-em">{tab?.domain}</h1>
                <div class="token-title-3">
                    <Translate id="site:connectionDescriptionInvalidCertificate.title" options={{ domain: tab?.domain }} rawHTML={true} />
                </div>
                <Button variant="standard">Leave This Site</Button>
                <a className="phishing-malware-link" onClick={() => console.log('Help page')}>
                    About our phishing and malware protection
                </a>
            </Stack>
        </div>
    );
}
